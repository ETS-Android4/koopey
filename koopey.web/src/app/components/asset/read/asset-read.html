<h1>{{ 'ASSET' | translate }}</h1>
<div *ngIf="transaction && transaction.asset">
  <mat-card>
    <mat-card-content>
      <mat-tab-group>
        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon>emoji_events</mat-icon>
          </ng-template>
          <span *ngIf="transaction.asset.firstImage">
            <img
              [src]="sanitizer.bypassSecurityTrustUrl(transaction.asset.firstImage)"
            />
          </span>
          <span
            *ngIf="!transaction || !transaction.asset || !transaction.asset.firstImage"
          >
            <img src="/images/default.svg" />
          </span>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon>emoji_events</mat-icon>
          </ng-template>
          <span *ngIf="transaction.asset.secondImage">
            <img
              [src]="sanitizer.bypassSecurityTrustUrl(transaction.asset.secondImage)"
              class="app-images"
            />
          </span>
          <span *ngIf="!transaction.asset.secondImage">
            <img src="/images/default.svg" />
          </span>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon>emoji_events</mat-icon>
          </ng-template>
          <span *ngIf="transaction.asset.thirdImage">
            <img
              [src]="sanitizer.bypassSecurityTrustUrl(transaction.asset.thirdImage)"
            />
          </span>
          <span *ngIf="!transaction.asset.thirdImage">
            <img src="/images/default.svg" />
          </span>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon>emoji_events</mat-icon>
          </ng-template>
          <span *ngIf="transaction.asset.fourthImage">
            <img
              [src]="sanitizer.bypassSecurityTrustUrl(transaction.asset.fourthImage)"
            />
          </span>
          <span *ngIf="!transaction.asset.fourthImage">
            <img src="/images/default.svg" />
          </span>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
    <mat-card-title>
      <table width="100%" cellspacing="0">
        <tr>
          <td>
            <h3 style="float: left">{{ transaction.asset.name }}</h3>
          </td>
          <td>
            <h4 style="float: right">
              {{ transaction.asset.distance | distance }}
              <img src="/images/ic_place_black_24dp.png" />
            </h4>
          </td>
        </tr>
        <tr>
          <td></td>
          <td>
            <h4 style="float: right">
              {{ transaction.currency | codetosymbol }} {{ transaction.value }}
            </h4>
          </td>
        </tr>
      </table>
    </mat-card-title>
  </mat-card>
  <!--Description-->
  <mat-card>
    <mat-card-title>{{ 'DESCRIPTION' | translate }}</mat-card-title>
    <mat-card-content>{{ transaction.asset.description }}</mat-card-content>
  </mat-card>
  <!--File-->
  <mat-card *ngIf="isFileVisible()">
    <mat-card-title>{{ 'FILE' | translate }}</mat-card-title>
    <mat-card-content>
      <button
        mat-raised-button
        (click)="handleFileDownloadEvent()"
        class="full-width"
      >
        <mat-icon>file_download</mat-icon>
      </button>
    </mat-card-content>
  </mat-card>
  <!--Reviews-->
  <mat-card>
    <mat-card-title>{{ 'REVIEWS' | translate }}</mat-card-title>
    <mat-card-content>
      <review-star-control [reviews]="transaction.asset.reviews">
      </review-star-control>
    </mat-card-content>
  </mat-card>
  <!--Tags-->
  <mat-card>
    <mat-card-title>{{ 'TAGS' | translate }}</mat-card-title>
    <mat-card-content>
      <tag-control-component
        [selectedTags]="transaction.asset.tags"
        [readOnly]="true"
      ></tag-control-component>
    </mat-card-content>
  </mat-card>
  <!--User-->
  <mat-card>
    <mat-card-title>{{ 'USER' | translate }}</mat-card-title>
    <mat-card-content>
      <user-control-component
        [user]="transaction.asset.sellerId"
        [horizontal]="false"
        [reviews]="true"
      ></user-control-component>
    </mat-card-content>
  </mat-card>
  <!--Buttons-->
  <mat-card>
    <mat-card-content *ngIf="permission">
      <button mat-mini-fab type="button" (click)="openMessage()">
        <mat-icon>email</mat-icon>
      </button>
      <button mat-mini-fab type="button" (click)="openMobileDialog()">
        <mat-icon>phone</mat-icon>
      </button>
      <button
        mat-mini-fab
        type="button"
        (click)="openTransactionDialog()"
        *ngIf="isTransactionVisible()"
      >
        <mat-icon>credit_card</mat-icon>
      </button>
      <!--Needs to be moved to transactions-->
      <button mat-mini-fab type="button" (click)="openReviewDialog()">
        <mat-icon>star</mat-icon>
      </button>
    </mat-card-content>
  </mat-card>
</div>
